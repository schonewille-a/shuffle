<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: search.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: search.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import queryString from "query-string";

var n = 0;
/** @module Search */
/** The search function that uses the YouTube data API to get a list of music videos
@function
@name searchVideo
@param {string} query The search query
@param {int} pageToken The max number of results on a page
@param {list} listOfVideoIDs The list in which videoIDs will be placed.
*/
export default function searchVideo(query, pageToken, listOfVideoIDs = []) {
  //Resets n variable on call of function
  if(listOfVideoIDs.length === 0) {
    n = 0;
  }

  //Youtube Data API request
  const params = {
    //Not certain what part means, but snippet works
    part: "snippet",
    //Q for query
    q: query,
    //Max results, break over 50
    maxResults: 10,
    // Avoid playlists
    type: 'video',
    // Only search music videos
    videoCategoryId: 10,
    // 4 to 20 minute long videos
    videoDuration: "medium",
    // To load the correct page of results
    pageToken,
    //Lovely API key
    key: "AIzaSyAfwfRNJQRwEKJtea5hcZQ0hswGloi7DUI"
  };

  return fetch(
    `https://www.googleapis.com/youtube/v3/search?${queryString.stringify(
      params
    )}`
  )
    .then(response => response.json())
    .then(response => {
      //Again with the page tokens
      const nextPageToken = response.nextPageToken;
      //This loop populates our vid array
      for (let item of response.items) {
        const videoID = item.id.videoId;
        const videoTitle = item.snippet.title;
        //If the type is undefined we reject it (how do we know this? who knows)
        if (videoID !== undefined &amp;&amp; videoID !== "undefined" &amp;&amp; videoID !== null) {
          //Pushes videoID and video title to 2d array
          listOfVideoIDs.push([]);
          listOfVideoIDs[n].push(videoID);
          listOfVideoIDs[n].push(videoTitle);
          n++;
        }
        // quit when we have 50 videos
        if (listOfVideoIDs.length === 50) {
          return listOfVideoIDs;
        }
      }
      if (nextPageToken !== undefined) {
        return searchVideo(query, nextPageToken, listOfVideoIDs);
      }
    });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-controls.html">controls</a></li><li><a href="module-Search.html">Search</a></li><li><a href="module-searchBar.html">searchBar</a></li><li><a href="module-TopBar.html">TopBar</a></li><li><a href="module-Video.html">Video</a></li></ul><h3>Classes</h3><ul><li><a href="module-App.html">App</a></li><li><a href="module-controls.html">controls</a></li><li><a href="module-searchBar.html">searchBar</a></li><li><a href="module-TopBar.html">TopBar</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Nov 09 2017 23:34:23 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
